{"ast":null,"code":"import _toConsumableArray from\"/home/lucaswerner/repositories/github-personal/online-store-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/lucaswerner/repositories/github-personal/online-store-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/lucaswerner/repositories/github-personal/online-store-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/lucaswerner/repositories/github-personal/online-store-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/lucaswerner/repositories/github-personal/online-store-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/lucaswerner/repositories/github-personal/online-store-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Link}from'react-router-dom';import{Button}from'reactstrap';import AddCartButton from'../../components/AddCartButton';import RemoveCartButton from'../../components/RemoveCartButton';import ShoppingCartSize from'../../components/ShoppingCartSize/ShoppingCartSize';import ReturnButton from'../../components/ReturnButton';import'./shoppingcartpage.css';var ShoppingCart=/*#__PURE__*/function(_React$Component){_inherits(ShoppingCart,_React$Component);var _super=_createSuper(ShoppingCart);function ShoppingCart(props){var _this;_classCallCheck(this,ShoppingCart);_this=_super.call(this,props);var cart=JSON.parse(localStorage.getItem('cart'))===null?'':JSON.parse(localStorage.getItem('cart'));_this.state={products:cart,cartSize:cart.length};_this.updateCart=_this.updateCart.bind(_assertThisInitialized(_this));return _this;}_createClass(ShoppingCart,[{key:\"updateCart\",value:function updateCart(){var products=JSON.parse(localStorage.getItem('cart'));this.setState({products:products,cartSize:products.length});}},{key:\"quantityButtons\",value:function quantityButtons(product,id){var products=this.state.products;var quantity=products.filter(function(item){return item.id===id;}).length;return/*#__PURE__*/React.createElement(\"div\",{className:\"flex_qtd_container\"},/*#__PURE__*/React.createElement(RemoveCartButton,{product:product,products:products,datatestid:\"product-decrease-quantity\",updateCart:this.updateCart,buttonText:\"-\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"input_qtd\",\"data-testid\":\"shopping-cart-product-quantity\"},quantity),/*#__PURE__*/React.createElement(AddCartButton,{product:product,datatestid:\"product-increase-quantity\",updateCart:this.updateCart,buttonText:\"+\"}));}},{key:\"removeAllItems\",value:function removeAllItems(id){var products=this.state.products;var removedItem=products.filter(function(product){return product.id!==id;});localStorage.setItem('cart',JSON.stringify(removedItem));return this.updateCart();}},{key:\"createProductInfos\",value:function createProductInfos(title,thumbnail,price,id,product){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{key:id,className:\"flex_cart_container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"align\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",onClick:function onClick(){return _this2.removeAllItems(id);}},\"X\")),/*#__PURE__*/React.createElement(\"div\",{className:\"align, image_content\"},/*#__PURE__*/React.createElement(\"img\",{src:thumbnail,alt:\"imagem de um \".concat(title)})),/*#__PURE__*/React.createElement(\"div\",{className:\"title_content align\",\"data-testid\":\"shopping-cart-product-name\"},title),/*#__PURE__*/React.createElement(\"div\",{className:\"align quantity_button\"},this.quantityButtons(product,id)),/*#__PURE__*/React.createElement(\"div\",{className:\"align\"},\"R$\".concat(price)));}},{key:\"checkoutButton\",value:function checkoutButton(){this.value='Finalizar compra';return/*#__PURE__*/React.createElement(Link,{to:\"/checkout\"},/*#__PURE__*/React.createElement(Button,{className:\"checkout_button\",type:\"button\",\"data-testid\":\"checkout-products\"},\"Finalizar Compra\"));}},{key:\"totalPrice\",value:function totalPrice(){var products=this.state.products;var totalPrice=products.reduce(function(acc,cur){var price=cur.price;return acc+price;},0);totalPrice=new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(totalPrice);localStorage.setItem('totalPrice',totalPrice);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Valor total da compra: \\n          \".concat(totalPrice)));}},{key:\"filteredProducts\",value:function filteredProducts(){var _this3=this;var _this$state=this.state,products=_this$state.products,cartSize=_this$state.cartSize;var filteredProducts=products.reduce(function(acc,current){var unique=acc.find(function(item){return item.id===current.id;});if(!unique){return[].concat(_toConsumableArray(acc),[current]);}return acc;},[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"div_content\"},/*#__PURE__*/React.createElement(ReturnButton,null),/*#__PURE__*/React.createElement(ShoppingCartSize,{cartSize:cartSize}),/*#__PURE__*/React.createElement(\"div\",{className:\"div_container\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Carrinho de compras: \"),filteredProducts.map(function(product){return _this3.createProductInfos(product.title,product.thumbnail,product.price,product.id,product);})),/*#__PURE__*/React.createElement(\"div\",{className:\"div_container\"},this.totalPrice()),this.checkoutButton());}},{key:\"render\",value:function render(){var products=this.state.products;if(products&&products.length!==0)return this.filteredProducts();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ReturnButton,null),/*#__PURE__*/React.createElement(\"div\",{className:\"empty_content\",\"data-testid\":\"shopping-cart-empty-message\"},\"Seu carrinho est\\xE1 vazio\"));}}]);return ShoppingCart;}(React.Component);export default ShoppingCart;","map":{"version":3,"sources":["/home/lucaswerner/repositories/github-personal/online-store-react/src/pages/ShoppingCartPage/ShoppingCartPage.js"],"names":["React","Link","Button","AddCartButton","RemoveCartButton","ShoppingCartSize","ReturnButton","ShoppingCart","props","cart","JSON","parse","localStorage","getItem","state","products","cartSize","length","updateCart","bind","setState","product","id","quantity","filter","item","removedItem","setItem","stringify","title","thumbnail","price","removeAllItems","quantityButtons","value","totalPrice","reduce","acc","cur","Intl","NumberFormat","style","currency","format","filteredProducts","current","unique","find","map","createProductInfos","checkoutButton","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button } from 'reactstrap';\nimport AddCartButton from '../../components/AddCartButton';\nimport RemoveCartButton from '../../components/RemoveCartButton';\nimport ShoppingCartSize from '../../components/ShoppingCartSize/ShoppingCartSize';\nimport ReturnButton from '../../components/ReturnButton';\nimport './shoppingcartpage.css';\n\n\nclass ShoppingCart extends React.Component {\n  constructor(props) {\n    super(props);\n    const cart = (JSON.parse(localStorage.getItem('cart')) === null ? '' : JSON.parse(localStorage.getItem('cart')));\n    this.state = { products: cart, cartSize: cart.length };\n    this.updateCart = this.updateCart.bind(this);\n  }\n\n  updateCart() {\n    const products = JSON.parse(localStorage.getItem('cart'));\n    this.setState({ products, cartSize: products.length });\n  }\n\n  quantityButtons(product, id) {\n    const { products } = this.state;\n    const quantity = products.filter((item) => item.id === id).length;\n    return (\n      <div className=\"flex_qtd_container\">\n        <RemoveCartButton\n          product={product}\n          products={products}\n          datatestid=\"product-decrease-quantity\"\n          updateCart={this.updateCart}\n          buttonText=\"-\"\n        />\n        <p className=\"input_qtd\" data-testid=\"shopping-cart-product-quantity\">{quantity}</p>\n        <AddCartButton\n          product={product}\n          datatestid=\"product-increase-quantity\"\n          updateCart={this.updateCart}\n          buttonText=\"+\"\n        />\n      </div>\n    );\n  }\n\n  removeAllItems(id) {\n    const { products } = this.state;\n    const removedItem = products.filter((product) => product.id !== id);\n    localStorage.setItem('cart', JSON.stringify(removedItem));\n    return this.updateCart();\n  }\n\n  createProductInfos(title, thumbnail, price, id, product) {\n    return (\n      <div key={id} className=\"flex_cart_container\">\n        <div className=\"align\">\n          <Button type=\"button\" onClick={() => this.removeAllItems(id)}>X</Button>\n        </div>\n        <div className=\"align, image_content\">\n          <img src={thumbnail} alt={`imagem de um ${title}`} />\n        </div>\n        <div className=\"title_content align\" data-testid=\"shopping-cart-product-name\">\n          {title}\n        </div>\n        <div className=\"align quantity_button\">\n          {this.quantityButtons(product, id)}\n        </div>\n        <div className=\"align\">\n          {`R$${price}`}\n        </div>\n      </div>\n    );\n  }\n\n  checkoutButton() {\n    this.value = 'Finalizar compra';\n    return (\n      <Link to=\"/checkout\">\n        <Button className=\"checkout_button\" type=\"button\" data-testid=\"checkout-products\">\n          Finalizar Compra\n        </Button>\n      </Link>\n    );\n  }\n\n  totalPrice() {\n    const { products } = this.state;\n    let totalPrice = products.reduce((acc, cur) => {\n      const { price } = cur;\n      return acc + price;\n    }, 0);\n    totalPrice = new Intl.NumberFormat('pt-BR', {\n      style: 'currency',\n      currency: 'BRL',\n    }).format(totalPrice);\n    localStorage.setItem('totalPrice', totalPrice);\n    return (\n      <div>\n        <h2>\n          {`Valor total da compra: \n          ${totalPrice}`}\n        </h2>\n      </div>\n    );\n  }\n\n  filteredProducts() {\n    const { products, cartSize } = this.state;\n    const filteredProducts = products.reduce((acc, current) => {\n      const unique = acc.find((item) => item.id === current.id);\n      if (!unique) {\n        return [...acc, current];\n      }\n      return acc;\n    }, []);\n    return (\n      <div className=\"div_content\">\n        <ReturnButton />\n        <ShoppingCartSize cartSize={cartSize} />\n        <div className=\"div_container\">\n          <h2>Carrinho de compras: </h2>\n          {filteredProducts.map((product) => this.createProductInfos(\n            product.title,\n            product.thumbnail,\n            product.price,\n            product.id,\n            product))}\n        </div>\n        <div className=\"div_container\">\n          {this.totalPrice()}\n        </div>\n        {this.checkoutButton()}\n      </div>\n    );\n  }\n\n  render() {\n    const { products } = this.state;\n    if (products && (products.length !== 0)) return this.filteredProducts();\n    return (\n      <div>\n        <ReturnButton />\n        <div className=\"empty_content\" data-testid=\"shopping-cart-empty-message\">\n          Seu carrinho est√° vazio\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShoppingCart;\n"]},"metadata":{},"sourceType":"module"}