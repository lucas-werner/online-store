{"ast":null,"code":"var _jsxFileName = \"/home/lucaswerner/repositories/trybe-projects/sd-03-block15-project-frontend-online-store-11/src/components/AddCartButton.js\";\nimport React, { Component } from 'react';\n\nclass AddCartButton extends Component {\n  constructor(props) {\n    super(props);\n    this.addToCart = this.addToCart.bind(this);\n  } // addToCart() {\n  //   const { product } = this.props;\n  //   const totalItems = parseInt(localStorage.getItem('totalItems'), 10) || 0;\n  //   const available = (product.quantity < product.available_quantity);\n  //   localStorage.setItem('teste', available);\n  //   // carrinho vazio\n  //   if (localStorage.getItem('cart') === 'null') {\n  //     product.quantity = 1;\n  //     localStorage.setItem('cart', JSON.stringify([product]));\n  //     localStorage.setItem('totalItems', totalItems + 1);\n  //   }\n  //   const cart = JSON.parse(localStorage.getItem('cart'));\n  //   if (cart.includes(product.id)) {\n  //     const index = cart.findIndex((item) => item.id === product.id);\n  //     cart[index].quantity += 1;\n  //     localStorage.setItem('totalItems', totalItems + 1);\n  //     localStorage.setItem('cart', JSON.stringify(cart));\n  //   }\n  //   // item novo\n  //   localStorage.setItem('totalItems', totalItems + 1);\n  //   console.log(cart);\n  //   localStorage.setItem('cart', JSON.stringify([...cart, product]));\n  // }\n\n\n  addToCart() {\n    const {\n      product\n    } = this.props;\n    const totalItems = parseInt(localStorage.getItem('totalItems'), 10) || 0;\n\n    if (!localStorage.products || localStorage.getItem('cart') === 'null') {\n      localStorage.setItem('totalItems', totalItems + 1);\n      localStorage.setItem('cart', JSON.stringify([product]));\n    }\n\n    const products = JSON.parse(localStorage.getItem('cart'));\n\n    if (localStorage.cart.includes(product.id)) {\n      const index = product.findIndex(item => item.id === product.id);\n      products[index].quantity += 1;\n      localStorage.setItem('totalItems', totalItems + 1);\n      localStorage.setItem('cart', JSON.stringify(products));\n    }\n\n    localStorage.setItem('totalItems', totalItems + 1);\n    localStorage.setItem('cart', JSON.stringify([...products, product]));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.addToCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }\n    }, \"Adicionar ao Carrinho!\");\n  }\n\n}\n\nexport default AddCartButton;","map":{"version":3,"sources":["/home/lucaswerner/repositories/trybe-projects/sd-03-block15-project-frontend-online-store-11/src/components/AddCartButton.js"],"names":["React","Component","AddCartButton","constructor","props","addToCart","bind","product","totalItems","parseInt","localStorage","getItem","products","setItem","JSON","stringify","parse","cart","includes","id","index","findIndex","item","quantity","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,MAAMC,aAAN,SAA4BD,SAA5B,CAAsC;AACpCE,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjB;AACD,GAJmC,CAMpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAD,EAAAA,SAAS,GAAG;AACV,UAAM;AAAEE,MAAAA;AAAF,QAAc,KAAKH,KAAzB;AACA,UAAMI,UAAU,GAAGC,QAAQ,CAACC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAD,EAAqC,EAArC,CAAR,IAAoD,CAAvE;;AACA,QAAI,CAACD,YAAY,CAACE,QAAd,IAA0BF,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,MAA/D,EAAuE;AACrED,MAAAA,YAAY,CAACG,OAAb,CAAqB,YAArB,EAAmCL,UAAU,GAAG,CAAhD;AACAE,MAAAA,YAAY,CAACG,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAe,CAACR,OAAD,CAAf,CAA7B;AAED;;AACD,UAAMK,QAAQ,GAAGE,IAAI,CAACE,KAAL,CAAWN,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAjB;;AACA,QAAID,YAAY,CAACO,IAAb,CAAkBC,QAAlB,CAA2BX,OAAO,CAACY,EAAnC,CAAJ,EAA4C;AAC1C,YAAMC,KAAK,GAAGb,OAAO,CAACc,SAAR,CAAmBC,IAAD,IAAUA,IAAI,CAACH,EAAL,KAAYZ,OAAO,CAACY,EAAhD,CAAd;AACAP,MAAAA,QAAQ,CAACQ,KAAD,CAAR,CAAgBG,QAAhB,IAA4B,CAA5B;AACAb,MAAAA,YAAY,CAACG,OAAb,CAAqB,YAArB,EAAmCL,UAAU,GAAG,CAAhD;AACAE,MAAAA,YAAY,CAACG,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeH,QAAf,CAA7B;AACD;;AACDF,IAAAA,YAAY,CAACG,OAAb,CAAqB,YAArB,EAAmCL,UAAU,GAAG,CAAhD;AACAE,IAAAA,YAAY,CAACG,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAe,CAAC,GAAGH,QAAJ,EAAcL,OAAd,CAAf,CAA7B;AAED;;AAGDiB,EAAAA,MAAM,GAAG;AACP,wBACE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,OAAO,EAAE,KAAKnB,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF;AAGD;;AAvDmC;;AA0DtC,eAAeH,aAAf","sourcesContent":["import React, { Component } from 'react';\n\nclass AddCartButton extends Component {\n  constructor(props) {\n    super(props);\n    this.addToCart = this.addToCart.bind(this);\n  }\n\n  // addToCart() {\n  //   const { product } = this.props;\n  //   const totalItems = parseInt(localStorage.getItem('totalItems'), 10) || 0;\n  //   const available = (product.quantity < product.available_quantity);\n  //   localStorage.setItem('teste', available);\n  //   // carrinho vazio\n  //   if (localStorage.getItem('cart') === 'null') {\n  //     product.quantity = 1;\n  //     localStorage.setItem('cart', JSON.stringify([product]));\n  //     localStorage.setItem('totalItems', totalItems + 1);\n  //   }\n  //   const cart = JSON.parse(localStorage.getItem('cart'));\n  //   if (cart.includes(product.id)) {\n  //     const index = cart.findIndex((item) => item.id === product.id);\n  //     cart[index].quantity += 1;\n  //     localStorage.setItem('totalItems', totalItems + 1);\n  //     localStorage.setItem('cart', JSON.stringify(cart));\n  //   }\n  //   // item novo\n  //   localStorage.setItem('totalItems', totalItems + 1);\n  //   console.log(cart);\n  //   localStorage.setItem('cart', JSON.stringify([...cart, product]));\n  // }\n\n  addToCart() {\n    const { product } = this.props;\n    const totalItems = parseInt(localStorage.getItem('totalItems'), 10) || 0;\n    if (!localStorage.products || localStorage.getItem('cart') === 'null') {\n      localStorage.setItem('totalItems', totalItems + 1);\n      localStorage.setItem('cart', JSON.stringify([product]));\n\n    }\n    const products = JSON.parse(localStorage.getItem('cart'));\n    if (localStorage.cart.includes(product.id)) {\n      const index = product.findIndex((item) => item.id === product.id);\n      products[index].quantity += 1;\n      localStorage.setItem('totalItems', totalItems + 1);\n      localStorage.setItem('cart', JSON.stringify(products));\n    }\n    localStorage.setItem('totalItems', totalItems + 1);\n    localStorage.setItem('cart', JSON.stringify([...products, product]));\n\n  }\n\n\n  render() {\n    return (\n      <button type=\"button\" onClick={this.addToCart}>Adicionar ao Carrinho!</button>\n    );\n  }\n}\n\nexport default AddCartButton;\n"]},"metadata":{},"sourceType":"module"}