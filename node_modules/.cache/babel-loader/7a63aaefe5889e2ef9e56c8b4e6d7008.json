{"ast":null,"code":"import _classCallCheck from\"/home/lucaswerner/repositories/github-personal/online-store-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/lucaswerner/repositories/github-personal/online-store-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/lucaswerner/repositories/github-personal/online-store-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/lucaswerner/repositories/github-personal/online-store-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/lucaswerner/repositories/github-personal/online-store-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import*as API from'../../services/api';import ProductList from'../../components/ProductList/ProductList';import ShoppingCartSize from'../../components/ShoppingCartSize/ShoppingCartSize';import'./productlistpage.css';var ProductListPage=/*#__PURE__*/function(_Component){_inherits(ProductListPage,_Component);var _super=_createSuper(ProductListPage);function ProductListPage(props){var _this;_classCallCheck(this,ProductListPage);_this=_super.call(this,props);var size=JSON.parse(localStorage.getItem('cart'))===null?'':JSON.parse(localStorage.getItem('cart')).length;_this.state={categories:[],query:'',categoryID:'',productsList:[],cartSize:size};_this.handleRadio=_this.handleRadio.bind(_assertThisInitialized(_this));_this.handleQueryButton=_this.handleQueryButton.bind(_assertThisInitialized(_this));_this.updateCart=_this.updateCart.bind(_assertThisInitialized(_this));return _this;}_createClass(ProductListPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;API.getCategories().then(function(categories){return _this2.setState({categories:categories});});}},{key:\"updateCart\",value:function updateCart(){var size=JSON.parse(localStorage.getItem('cart')).length;this.setState({cartSize:size});}},{key:\"categoryList\",value:function categoryList(id,name){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{key:id},/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:id,value:id,onClick:function onClick(e){return _this3.handleRadio(e);},name:\"category\",key:id,\"data-testid\":\"category\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:id},name));}},{key:\"handleRadio\",value:function handleRadio(event){var _this4=this;var query=this.state.query;this.setState({categoryID:event.target.value});API.getProductsFromCategoryAndQuery(event.target.value,query).then(function(r){return _this4.setState({productsList:r.results});});}},{key:\"handleQueryButton\",value:function handleQueryButton(){var _this5=this;var _this$state=this.state,query=_this$state.query,categoryID=_this$state.categoryID;API.getProductsFromCategoryAndQuery(categoryID,query).then(function(r){return _this5.setState({productsList:r.results});});}},{key:\"renderHeader\",value:function renderHeader(){var _this6=this;var _this$state2=this.state,query=_this$state2.query,cartSize=_this$state2.cartSize;return/*#__PURE__*/React.createElement(\"div\",{className:\"header\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",\"data-testid\":\"query-input\",value:query,onChange:function onChange(e){return _this6.setState({query:e.target.value});}}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",\"data-testid\":\"query-button\",onClick:this.handleQueryButton},\"BUSCA\"),/*#__PURE__*/React.createElement(ShoppingCartSize,{cartSize:cartSize}));}},{key:\"render\",value:function render(){var _this7=this;var _this$state3=this.state,categories=_this$state3.categories,productsList=_this$state3.productsList,cartSize=_this$state3.cartSize;return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},this.renderHeader(),/*#__PURE__*/React.createElement(\"div\",{className:\"inner-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"categories-container\"},categories.map(function(_ref){var id=_ref.id,name=_ref.name;return _this7.categoryList(id,name);})),/*#__PURE__*/React.createElement(ProductList,{productsList:productsList,updateCart:this.updateCart,cartSize:cartSize})));}}]);return ProductListPage;}(Component);export default ProductListPage;","map":{"version":3,"sources":["/home/lucaswerner/repositories/github-personal/online-store-react/src/pages/ProductListPage/ProductListPage.js"],"names":["React","Component","API","ProductList","ShoppingCartSize","ProductListPage","props","size","JSON","parse","localStorage","getItem","length","state","categories","query","categoryID","productsList","cartSize","handleRadio","bind","handleQueryButton","updateCart","getCategories","then","setState","id","name","e","event","target","value","getProductsFromCategoryAndQuery","r","results","renderHeader","map","categoryList"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as API from '../../services/api';\nimport ProductList from '../../components/ProductList/ProductList';\nimport ShoppingCartSize from '../../components/ShoppingCartSize/ShoppingCartSize';\nimport './productlistpage.css';\n\nclass ProductListPage extends Component {\n  constructor(props) {\n    super(props);\n    const size = (JSON.parse(localStorage.getItem('cart')) === null ? '' : JSON.parse(localStorage.getItem('cart')).length);\n    this.state = {\n      categories: [],\n      query: '',\n      categoryID: '',\n      productsList: [],\n      cartSize: size,\n    };\n    this.handleRadio = this.handleRadio.bind(this);\n    this.handleQueryButton = this.handleQueryButton.bind(this);\n    this.updateCart = this.updateCart.bind(this);\n  }\n\n  componentDidMount() {\n    API.getCategories().then((categories) => this.setState({ categories }));\n  }\n\n  updateCart() {\n    const size = JSON.parse(localStorage.getItem('cart')).length;\n    this.setState({ cartSize: size });\n  }\n\n  categoryList(id, name) {\n    return (\n      <div key={id}>\n        <input\n          type=\"radio\"\n          id={id}\n          value={id}\n          onClick={(e) => this.handleRadio(e)}\n          name=\"category\"\n          key={id}\n          data-testid=\"category\"\n        />\n        <label htmlFor={id}>{name}</label>\n      </div>\n    );\n  }\n\n\n  handleRadio(event) {\n    const { query } = this.state;\n    this.setState({ categoryID: event.target.value });\n    API.getProductsFromCategoryAndQuery(event.target.value, query)\n      .then((r) => this.setState({ productsList: r.results }));\n  }\n\n  handleQueryButton() {\n    const { query, categoryID } = this.state;\n    API.getProductsFromCategoryAndQuery(categoryID, query)\n      .then((r) => this.setState({ productsList: r.results }));\n  }\n\n  renderHeader() {\n    const { query, cartSize } = this.state;\n    return (\n      <div className=\"header\">\n        <input\n          type=\"text\"\n          data-testid=\"query-input\"\n          value={query}\n          onChange={(e) => this.setState({ query: e.target.value })}\n        />\n        <button type=\"button\" data-testid=\"query-button\" onClick={this.handleQueryButton}>\n          BUSCA\n        </button>\n        <ShoppingCartSize cartSize={cartSize} />\n      </div>\n    );\n  }\n\n  render() {\n    const { categories, productsList, cartSize } = this.state;\n    return (\n      <div className=\"container\">\n        {this.renderHeader()}\n        <div className=\"inner-container\">\n          <div className=\"categories-container\">\n            {categories.map(({ id, name }) => this.categoryList(id, name))}\n          </div>\n          <ProductList\n            productsList={productsList}\n            updateCart={this.updateCart}\n            cartSize={cartSize}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ProductListPage;\n"]},"metadata":{},"sourceType":"module"}